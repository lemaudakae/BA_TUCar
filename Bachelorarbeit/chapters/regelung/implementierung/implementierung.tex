\section{Implementierung \dcsecondauthorshort}
\label{sec:regelung:implementierung}
Da die theoretischen Grundlagen zum Aufbau des \glqq Pure-Pursuit\grqq-Reglers eines Fahrzeugs mit Ackermannlenkung auf Basis einer Weltkarte nun bekannt sind, soll nun die Eingliederung dieser in das vorliegende System erläutert werden. Wie in Kapitel \ref{ssec:software_struktur:matlab:callbacks} bereits beschrieben, erfolgt die Regelung im Rahmen des sogenannten Odometrie-Callbacks. Diese Funktion wird gerufen, sobald der ROS-Node des Roboters neue Daten im entsprechenden Odometrie-Topic veröffentlicht, die (einstellbare) Frequenz des Publizierens dieser Informationen bestimmt also die Regelfrequenz.

Neben der in der empfangenen Message selbst enthaltenen Geschwindigkeit wird für die Aktualisierung der im Folgenden benötigten Pose (siehe Abschnitt \ref{sec:regelung:prinzip}) noch die Orientierung des Fahrzeugs aus dem \gls{acr:imu}-Topic abgerufen. Auf Basis dieser Position \& Orientierung können nun wie in den Abschnitten \ref{sec:regelung:zielpunktgewinnung} und \ref{sec:regelung:lenkwinkel} erläutert regelungsrelevante Punkte aus der Weltkarte extrahiert und auf Basis dieser Zielpunkt und Lenkwinkel ermittelt werden.

\paragraph{Vorteile der Architektur}
Die durch Kopplung der Fahrspurerkennung und Regelung an unterschiedliche Ereignisse erreichte Trennung dieser beiden Prozesse macht es möglich, die Regelung des Roboters mit geringeren Totzeiten und höheren Frequenzen als bei einer Fusion dieser Algorithmen in einer Funktion durchzuführen. Fahrbahnmarkierungen müssen vor Ausführen der Reglung nicht erst erkannt werden, stattdessen wird die Lage dieser bereits in der Weltkarte eingetragenen Koordinatenserien in Bezug auf das Modellfahrzeug bestimmt. Wurden die Fahrbahnmarkierungen richtig erkannt und ist das ermittelte Bewegungsmodell zur Posenaktualisierung ausreichend genau, so ergibt sich trotz relativ niedriger Bildrate kaum ein Nachteil zu einer der Regelfrequenz gleichen Häufigkeit des Verarbeitens neuer Aufnahmen. Ein kritischer Punkt wird erst erreicht, wenn die gefahrene Entfernung zwischen zwei Bildern einen Zielpunkt außerhalb des Bereichs der schon erkannten Fahrbahnmarkierungen erfordert.